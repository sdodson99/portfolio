---
import type { CollectionEntry } from "astro:content";
import { getEntries } from "astro:content";
import Timespan from "../time/timespan.astro";

interface Props {
  experience: CollectionEntry<"experience">;
}

const { experience } = Astro.props;

const {
  name,
  location,
  position,
  highlights,
  skills: skillReferences,
  logoUrl,
  startDate,
  endDate,
} = experience.data;

const skills = await getEntries(skillReferences);
---

<article>
  <img alt="" src={logoUrl} />
  <h3>{name}</h3>
  <div>{location}</div>
  <div>{position}</div>
  <div>
    <h4>Highlights</h4>
    <ul>
      {highlights.map((highlight) => <li>{highlight}</li>)}
    </ul>
  </div>
  <div>
    <h4>Skills</h4>
    <ul>
      {
        skills.map((skill) => (
          <li>
            <img alt="" />
            <div>{skill.data.name}</div>
          </li>
        ))
      }
    </ul>
  </div>
  <Timespan startDate={startDate} endDate={endDate} />
</article>
